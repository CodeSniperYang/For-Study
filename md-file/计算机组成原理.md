# 计算机组成原理

计算机组成原理之机器：1 2 3 4 5 章

计算机组成原理之数字：6 章

计算机组成原理之CPU：7 8 9 10章

---

## 第一二三章

缩写：

ALU：Arithmetic Logic Unit 算术逻辑单元
ACC：累加器 Accumulator
MQ：乘商寄存器MQ(Multiplier-Quotient Register) 
PC（计数器）存放当前欲执行的指令的地址

CU:Control Unit 控制单元

CPU：运算器   控制器
存储器：主存，辅存
存储字：存放在一个存储单元中的二进制代码组合。
存储字长：存储单元中的二进制代码位数

主要技术指标：
1.机器字长：CPU一次能处理数据的位数，与CPU中的寄存器位数有关
2.运算速度：主频 核数 
3.CPI：执行一条指令说需的时钟周期数
4.MIPS：CPU每秒能够执行百万条指令
5.FLOPS：CPU每秒浮点数运算次数
6.存储容量：存放二进制信息的总位数
主存容量：存储单元个数*存储字长 MAR(2) * MDR
辅存容量：字节数

```
冯·诺依曼结构机 特点是： 
  1）使用单一的处理部件来完成计算、存储以及通信的工作。 
  2）存储单元是定长的线性组织。 
  3）存储空间的单元是直接寻址的。 +++
  4）使用低级机器语言，指令通过操作码来完成简单的操作。 
  5）对计算进行集中的顺序控制。 
  6）计算机硬件系统由运算器、存储器、控制器、输入设备、输出设备五大部件组成并规定了它们的基本功能。 
  7）采用二进制形式表示数据和指令。 +++
  8）在执行程序和处理数据时必须将程序和数据从外存储器装入主存储器中，然后才能使计算机在工作时能够自动调整地从存储器中取出指令并加以执行。 
	9）机器已存储器为中心，输入输出设备可直接与存储器间进行数据传送。 +++
  这就是存储程序概念的基本原理。
```

指令和数据CPU区分的依据：指令周期的不同阶段

---

## 总线

总线：各个部件共享的传输介质

基本特性：分时，共享

片内总线：芯片内部的总线
系统总线：计算机各部件之间{
	数据总线 双向 与机器字长，存储字长有关
	地址总线 单向 与存储地址，I\O地址有关
	控制总线 有出 有入
}
通信总线：用于计算机系统之间，计算机系统于其他系统

总线宽度：数据总线的根数，用位表示，一般是8的倍数
总线带宽：总线上每秒能传输的最大字节量

总线特性：{
	机械特性 尺寸，形状
	电气特性 传输方向，电平范围
	功能特性 地址 数据 控制 
	时间特性 信号的时许
}

性能指标：{
	总线宽度 数据线的根数
	标准传输率 每秒传输的最大字节数（MBps）
	时钟同步\异步 同步，不同步
	总线复用 地址线和数据线复用 8086
	信号线数 三线总和
	总线控制方式 突发 自动 仲裁
	其他指标
}

总线标准{
	ISA
	EISA
	USB
	PCI
	AGP 显卡
}

总线控制:
主设备：对总线有控制权
从设备：响应命令
总线判优控制{
	集中式：链式查询，计时器定时查询，独立请求方式
	分布式
}

---

## 存储器

章节：{
	1.概述
	2.半导体存储芯片介绍
	3.RAM
	4.ROM
	5.存储器与CPU的连接
	6.存储器的校验
	7.提高访存速度的措施
}

按存储介质分：{
	半导体存储器
	磁表面存储器
	磁芯存储器
	光盘存储器
}

按存储方式分：{
	存取时间与物理地址无关{
		随机存储器 可读可写
		只读存储器 可读
		}
	存取时间与物理地址有关{
		顺序存取存储器 磁带
		直接存取存储器 磁盘
		}
}

作用分类：{
	主存储器{
		RAM 可读可写 静态和动态
		ROM 只可读	MROM，PROM，EPROM，EEPROM
	}
	辅助存储器	
	闪存
	Cache 通常是：静态ROM
}

数据在主存中的存储：{
	大端方式
	小端方式
}

主存的技术指标{
	存储容量：存放二进制代码的总位数
	存储速度：{
	存取时间 :存储器的访问时间
	存取周期：连续两次独立的存储器操作所需的最小时间间隔 读周期，写周期
	}
	存储器的带宽：bit\s	 
}

片选线：CS，CE  可能是：一组存储芯片
读\写控制线：WE，OE

给定地址之后找到存储单元，译码驱动方式：
线选法
重合法 二位阵列

随机存取存储器(RAM)
1.静态RAM 触发器 Intel2114_64×64
2.动态RAM 电容 Intel1103

刷新：集中刷新、分散刷新、异步刷新

只读存储器(ROM)
1.掩模ROM(MROM) 交叉处有MOS管为1
2.PROM(一次性编程) 熔丝
3.EPROM(多次性编程) N型沟道浮动栅MOS电路
4.EEPROM(多次性编程) 电可擦写 局部擦写 全部擦写
5.Flash Memory(闪速型存储器)

CPU和存储器的连接：
CPU寻址范围大
1.扩展：位扩展，增加存储字长
			  字扩展，增加存储字
			  字位同时扩展
2.存储器和CPU的连接：

存储器的校验：
任意两组合法代码之间二进制位的最少差异数
1.编码的最小距离：任意两组合法代码之间二进制位数的最少差异
L-1=D+C 
L：编码的最小距离 D：检测错误的位数 C：纠正错误的位数

汉明码是具有一位纠错能力的编码：
2^k>=n+k+1 
信息位：n，校验位：k

提高访存速度：调整主存结构
1.单体多字 增加存储器的带宽
2.多体并行：高位交叉 低位交叉

高速缓存
避免CPU空等，用DRAM做
Cache的命中率：h
访问Cache的时间：tc
访问主存的时间：tm

Cache的读写操作：
写直达法：
写回法：

Cache-主存的地址映射：

1.直接相联映射：
2.全相联映射：
3.组相联映射：

替换算法：
1.先进先出(FIFO)
2.近期最少使用(LRU)

辅助存储器
磁表面存储器的技术指标：
1.记录密度 道密度Dt，位密度Db
2.存储容量 C = n\*k*s
3.平均寻址时间 寻道时间+等待时间
	辅存的速度：1）寻址时间 2）磁头读写时间
4.数据传输率 D(pao) = Db \* V
5.误码率 

## 输入输出系统

发展概述：
1.早期 串行 分散连接
2.接口模块和DMA阶段 并行：中段方式，DMA方式 总线连接
3.具有通道结构的阶段  
4.具有I\O处理机的阶段

组成：
1.I\O指令
(1):I\O指令 CPU指令的一部分 操作码 命令码 设备码
(2):通道指令 通道自身的指令 
2.I\O硬件
设备 接口
设备->设备控制器->通道->子通道

通道程序是由 通道控制字（或称通道指令）组成

I\O设备与主机信息传送的控制方式
1.程序查询方式 CPU和I\O串行工作
2.程序中段方式 部分并行
3.DMA方式 以内存为中心 DMA控制器 并行工作

中断服务程序的流程：
(1)保护现场 程序断点 寄存器内容的保护
(2)中断服务
(3)恢复现场
(4)中断返回
